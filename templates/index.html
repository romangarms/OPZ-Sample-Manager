{% extends "base.html" %}

{%block stylesheets %}
<link rel="stylesheet" href="/static/css/index.css">
{%endblock%}

{%block title %}
<title>OP-Z Sample Manager and Converter</title>
{%endblock%}

{% block main %}
<h1>Welcome to OP-Z All-in-One Sample Utility</h1>

<script>
    // make a request to "/get-config-setting?config_option=OPZ_MOUNT_PATH" to check if a mount path is set
    function checkMountPath() {
        fetch('/get-config-setting?config_option=OPZ_MOUNT_PATH')
            .then(response => response.json())
            .then(data => {
                if (data.config_value && data.config_value !== '') {
                    document.getElementById('mount-path-container').hidden = true;
                } else {
                    document.getElementById('mount-path').innerHTML = 'OP-Z mount path not set. Please select your OP-Z mount directory in <a href="/utilitysettings" class="btn btn-danger">Utility Settings</a>';
                }
            })
            .catch(error => {
                console.error('Error fetching mount path:', error);
                document.getElementById('mount-path').innerText = 'Error fetching mount path.';
            });
    }

    // Run on page load
    checkMountPath();

    // Run when window regains focus
    window.addEventListener('focus', checkMountPath);

    // Initialize Lucide icons
    document.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons();
    });
</script>

<div id="mount-path-container" class="container">
    <p id="mount-path">Checking OP-Z mount path...</p>
</div>

<div class="tile-grid">
    <a href="/sampleconverter" class="nav-tile tile-primary">
        <i data-lucide="audio-waveform"></i>
        <h3>Sample Converter</h3>
        <p>Convert audio files to OP-Z format</p>
    </a>

    <a href="/samplemanager" class="nav-tile tile-secondary">
        <i data-lucide="folder-open"></i>
        <h3>Sample Manager</h3>
        <p>Manage samples on your OP-Z</p>
    </a>

    <a href="/configeditor" class="nav-tile tile-warning">
        <i data-lucide="file-edit"></i>
        <h3>Config Editor</h3>
        <p>Edit OP-Z configuration files</p>
    </a>

    <a href="/utilitysettings" class="nav-tile tile-danger">
        <i data-lucide="settings"></i>
        <h3>Utility Settings</h3>
        <p>Configure application settings</p>
    </a>
</div>

<div style="text-align: center;">
    <a href="https://github.com/romangarms/opz-sample-manager" target="_blank" class="github-link">
        <i data-lucide="github"></i>
        View on GitHub
    </a>
</div>

{% endblock %}

</html>