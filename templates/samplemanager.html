{% extends "base.html" %}
{% from 'macros.html' import sample_category_pair, nav_button %}

{%block stylesheets %}
<link rel="stylesheet" href="/static/css/samplemanager.css">
{%endblock%}

{%block title %}
<title>OP-Z Sample Manager</title>
{%endblock%}

{% block main %}
<h1>OP-Z Sample Manager</h1>

{{ nav_button('/', 'Home Page') }}

<button onclick="openOpzDirectory()" class="btn btn-secondary">Open OP-Z Directory</button>
<div id="sample-output"></div>

<div id="validation-error-container" class="error-container" hidden>
    <p id="validation-error-message"></p>
</div>

<div id="storage-info">
    <div class="storage-section">
        <h4>Storage</h4>
        <div class="info-row">
            <span class="info-label">Used:</span>
            <span class="info-value" id="storage-used">0 KB</span>
        </div>
        <div class="info-row">
            <span class="info-label">Free:</span>
            <span class="info-value" id="storage-free">0 KB</span>
        </div>
    </div>

    <div class="storage-section">
        <h4>Usage</h4>
        <div class="info-row">
            <span class="info-label">Samples Used:</span>
            <span class="info-value" id="samples-used">0</span>
        </div>
        <div class="storage-bar-container">
            <div class="storage-bar">
                <div class="storage-bar-fill" id="storage-bar-fill"></div>
            </div>
            <span class="storage-bar-label" id="storage-bar-label">Storage: 0%</span>
        </div>
    </div>
</div>

<div id="file-list">
    {{ sample_category_pair('1-kick', 'Kicks', '2-snare', 'Snares') }}
    {{ sample_category_pair('3-perc', 'Percussion', '4-fx', 'FX') }}

    <hr class="section-divider">

    {{ sample_category_pair('5-bass', 'Bass', '6-lead', 'Lead') }}
    {{ sample_category_pair('7-arpeggio', 'Arpeggio', '8-chord', 'Chords') }}
</div>

<script src="/static/js/samplemanager.js"></script>
<script>
    // on page load, list the samples
    document.addEventListener("DOMContentLoaded", function() {
        fetchOpzSamples();
    });
</script>

{% endblock %}

</html>